<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <!-- Styles -->
  <style>
    .node { fill: #ffffff; stroke: #333; stroke-width: 2; }
    .node-text { font-family: sans-serif; font-size: 14px; text-anchor: middle; }
    .edge { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrow); }
    .label-bg { fill: #f0f0f0; }
    .label-text { font-family: sans-serif; font-size: 11px; fill: #555; text-anchor: middle; }
    .user { fill: #e3f2fd; stroke: #2196f3; }
    .file { fill: #fff8e1; stroke: #ffc107; }
    .service { fill: #e8f5e9; stroke: #4caf50; }
    .command { fill: #f3e5f5; stroke: #9c27b0; rx: 10; ry: 10; }
  </style>

  <!-- Markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#333" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" class="node-text" style="font-size: 20px; font-weight: bold;">Budgetizer CLI Workflow</text>

  <!-- Groups -->
  
  <!-- User/Start -->
  <circle cx="100" cy="250" r="40" class="node user" />
  <text x="100" y="255" class="node-text">User</text>

  <!-- Commands -->
  <g transform="translate(250, 150)">
    <rect x="0" y="0" width="160" height="50" class="node command" />
    <text x="80" y="30" class="node-text">transactions</text>
  </g>

  <g transform="translate(250, 300)">
    <rect x="0" y="0" width="160" height="50" class="node command" />
    <text x="80" y="30" class="node-text">budgets</text>
  </g>

  <!-- Services -->
  <g transform="translate(600, 225)">
    <path d="M0,10 A50,15 0 0,0 100,10 A50,15 0 0,0 0,10 L0,80 A50,15 0 0,0 100,80 L100,10" class="node service" />
    <path d="M0,10 A50,15 0 0,1 100,10" fill="none" stroke="#4caf50" stroke-width="2" />
    <text x="50" y="55" class="node-text">BankService</text>
    <text x="50" y="75" class="node-text" style="font-size: 10px;">(Database / AI)</text>
  </g>

  <!-- Excel Files -->
  <g transform="translate(480, 150)">
    <path d="M0,0 L80,0 L100,20 L100,60 L0,60 Z" class="node file" />
    <polyline points="80,0 80,20 100,20" fill="none" stroke="#ffc107" stroke-width="2"/>
    <text x="50" y="35" class="node-text" style="font-size:12px;">transactions.xlsx</text>
  </g>

  <g transform="translate(480, 300)">
    <path d="M0,0 L80,0 L100,20 L100,60 L0,60 Z" class="node file" />
    <polyline points="80,0 80,20 100,20" fill="none" stroke="#ffc107" stroke-width="2"/>
    <text x="50" y="35" class="node-text" style="font-size:12px;">budgets.xlsx</text>
  </g>


  <!-- Connections -->
  
  <!-- Flow 1: Transactions Loop -->
  <line x1="140" y1="240" x2="250" y2="180" class="edge" /> 
  <text x="180" y="200" class="label-text">1. runs (default)</text>

  <line x1="410" y1="175" x2="480" y2="175" class="edge" /> <!-- Cmd to File -->
  <text x="445" y="170" class="label-text">Exports</text>

  <path d="M600,250 C580,250 530,190 530,210" class="edge" stroke-dasharray="4" marker-end="none"/> <!-- DB to File Content (Implicit) -->
  
  <!-- Flow 2: Edit -->
  <path d="M530,150 C530,80 100,80 100,200" class="edge" stroke-dasharray="4" marker-end="url(#arrow)"/> 
  <text x="300" y="90" class="label-text">2. User Edits (Add Tags/Corrections)</text>

  <!-- Flow 3: Import -->
  <line x1="140" y1="250" x2="250" y2="200" class="edge" style="stroke-dasharray: 5,5;" /> 
  <text x="190" y="235" class="label-text">3. runs --load</text>

  <line x1="480" y1="200" x2="410" y2="200" class="edge" style="stroke-dasharray: 5,5;" />
  <text x="445" y="220" class="label-text">Reads</text>

  <path d="M330,200 C330,250 580,250 590,250" class="edge" /> <!-- Cmd to DB -->
  <text x="460" y="270" class="label-text">Updates DB / Retrains AI</text>


  <!-- Flow 4: Budgets Loop -->
  <line x1="130" y1="270" x2="250" y2="330" class="edge" /> 
  
  <line x1="410" y1="325" x2="480" y2="325" class="edge" /> 
  
  <line x1="480" y1="350" x2="410" y2="350" class="edge" style="stroke-dasharray: 5,5;" /> 
  <text x="445" y="370" class="label-text">--load</text>

</svg>
